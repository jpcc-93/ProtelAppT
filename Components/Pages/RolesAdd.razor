@page "/rol-add"
@inherits ProtelAppT.Service.CrudComponentBase<Rol>
@inject IGenericRepository Repo
@inject ISnackbar Snackbar
@inject AuthenticationStateService _authServiceState
@inject NavigationManager _navigationManager
@using ProtelAppT.Data
@using ProtelAppT.Repositories
@using ProtelAppT.Service



@if (!_authServiceState.IsAuthenticated)
{
    _navigationManager.NavigateTo("/login");
}

else if (_authServiceState.GetUserRole() != "Administrador")
{
    <MudPaper Class="d-flex justify-center align-center" Style="height: 100vh;">
        <MudText Color="Color.Error" Typo="Typo.h6" Class="text-center">
            No tienes permiso para ver esta página.
        </MudText>
    </MudPaper>
    return;
}
else
{

    <MudPaper Class="pa-6 mt-10 mx-auto rounded elevation-8" MaxWidth="600px"
    Style="border: 1px solid #ccc; box-shadow: 0 2px 12px rgba(0,0,0,0.1);">
        <MudText Typo="Typo.h5" Class="mb-4">Registrar Nuevo Rol</MudText>


        <EditForm Model="@Entity" OnValidSubmit="GuardarRol">
            <ValidationSummary />
            <DataAnnotationsValidator />
            <MudGrid>
                <MudItem xs="12">
                    <MudTextField Label="Nombre" @bind-Value="Entity.Nombre" Required="true" />
                </MudItem>


                <MudItem xs="12">
                    <MudButton ButtonType="ButtonType.Submit" Variant="Variant.Filled" Color="Color.Primary">Guardar</MudButton>
                </MudItem>
            </MudGrid>
        </EditForm>
    </MudPaper>
}

@code {

   
    private async Task GuardarRol()
    {
        await Save();
        Snackbar.Add("Rol agregado.", Severity.Success);

    }
}